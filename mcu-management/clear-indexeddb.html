<!DOCTYPE html>
<html>
<head>
    <title>Clear IndexedDB</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
        .success { color: green; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>Clear IndexedDB Cache</h1>
    <p>This will delete all IndexedDB databases and clear browser cache.</p>
    <button onclick="clearAll()">Clear IndexedDB & LocalStorage</button>
    <div id="status"></div>

    <script>
        async function clearAll() {
            const status = document.getElementById('status');
            status.innerHTML = '<p class="info">Clearing...</p>';

            try {
                // Delete IndexedDB
                const dbs = await indexedDB.databases();
                
                for (let db of dbs) {
                    indexedDB.deleteDatabase(db.name);
                }

                // Clear localStorage
                localStorage.clear();
                sessionStorage.clear();

                // Clear service worker cache if exists
                if ('caches' in window) {
                    const cacheNames = await caches.keys();
                    for (let cacheName of cacheNames) {
                        await caches.delete(cacheName);
                    }
                }

                status.innerHTML = '<p class="success">✅ All caches cleared!</p><p>You can now close this page and refresh the app.</p>';
            } catch (error) {
                status.innerHTML = '<p style="color: red;">❌ Error: ' + error.message + '</p>';
            }
        }
    </script>
</body>
</html>
